{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
        "text": "ðŸ“š Data Catalog Search Results",
        "fontSize": 20
    },
    "params": [
        {
            "name": "search_term",
            "value": "",
            "bind": {
                "input": "search",
                "placeholder": "ì´ë¦„ ê²€ìƒ‰...",
                "name": "ðŸ” ê²€ìƒ‰: "
            }
        }
    ],
    "data": {
        "url": {
            "index": "data-catalog",
            "%context": true,
            "body": {
                "size": 1000,
                "_source": [
                    "table_name",
                    "description",
                    "database",
                    "columns"
                ]
            }
        },
        "format": {
            "property": "hits.hits"
        }
    },
    "transform": [
        {
            "calculate": "datum._source.table_name",
            "as": "table"
        },
        {
            "calculate": "datum._source.database",
            "as": "db"
        },
        {
            "calculate": "datum._source.description ? datum._source.description : 'ì„¤ëª… ì—†ìŒ'",
            "as": "desc"
        },
        {
            "filter": "search_term == '' || indexof(lower(datum.table), lower(search_term)) >= 0"
        }
    ],
    "mark": "text",
    "encoding": {
        "y": {
            "field": "table",
            "type": "nominal",
            "axis": null
        },
        "text": {
            "field": "table"
        },
        "color": {
            "value": "#0056b3"
        }
    },
    "layer": [
        {
            "mark": {
                "type": "text",
                "align": "left",
                "dx": -100,
                "fontWeight": "bold",
                "fontSize": 14
            },
            "encoding": {
                "text": {
                    "field": "table"
                }
            }
        },
        {
            "mark": {
                "type": "text",
                "align": "left",
                "dx": 50,
                "color": "gray"
            },
            "encoding": {
                "text": {
                    "field": "desc"
                }
            }
        },
        {
            "mark": {
                "type": "text",
                "align": "left",
                "dx": -200,
                "fontStyle": "italic",
                "color": "#555"
            },
            "encoding": {
                "text": {
                    "field": "db"
                }
            }
        }
    ]
}